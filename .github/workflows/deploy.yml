name: ðŸš€ Deploy to InfinityFree

# Trigger this workflow whenever you push to the main branch
on:
  push:
    branches:
      - main

jobs:
  ftp-deploy:
    runs-on: ubuntu-latest   # GitHub's virtual server environment

    steps:
      # Step 1: Checkout your repository (download the latest code)
      - name: ðŸ“¦ Checkout Repository
        uses: actions/checkout@v3

      # Step 2: Upload everything via FTP to InfinityFree
      - name: ðŸ“¤ Upload to InfinityFree via FTP
        uses: SamKirkland/FTP-Deploy-Action@v4.3.5
        with:
          # These three values come from your GitHub Secrets
          server: ${{ secrets.FTP_SERVER }}         # Example: ftpupload.net
          username: ${{ secrets.FTP_USERNAME }}     # Example: if0_40391805
          password: ${{ secrets.FTP_PASSWORD }}     # Your InfinityFree FTP password

          # Folder paths
          server-dir: /htdocs/                      # InfinityFreeâ€™s main public folder
          local-dir: ./                             # Upload everything in your repo root (notice the slash!)

          # Optional: Exclude unnecessary files/folders
          exclude: |
            **/.git*
            **/.github*
            **/README.md
            **/LICENSE
            **/node_modules/**
            **/*.log
            **/*.zip
